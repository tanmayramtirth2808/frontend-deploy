<div class="container mt-5">
  <div class="d-flex justify-content-between mb-4">
    <button class="btn btn-secondary" (click)="goBack()">Back</button>
  </div>

  <div *ngIf="book" class="card">
    <div class="card-img-container">
      <img [src]="book.imagePath || 'https://via.placeholder.com/400'" alt="{{ book.title }}" class="card-img-top img-fluid custom-img">
    </div>
    <div class="card-body">
      <h2 class="card-title">{{ book.title }}</h2>
      <p class="card-text">{{ book.description }}</p>
    </div>
  </div>

  <div class="d-flex justify-content-between align-items-center mt-4">
    <h4>Reviews</h4>
    <button
  (click)="addReview()"
  [disabled]="hasUserReviewed"
  class="btn btn-primary">
  Add Review
</button>
  </div>

  <div *ngIf="reviews && reviews.length > 0" class="mt-4">
    <ul class="list-group">
      <li *ngFor="let review of reviews" class="list-group-item d-flex justify-content-between align-items-center">
        <div>
          <strong>{{ review.username || 'Anonymous' }}</strong>: {{ review.content }}
        </div>
        <div>
          <button *ngIf="isUserReview(review)" class="btn btn-warning btn-sm me-2" (click)="editReview(review._id)">
            <i class="bi bi-pencil"></i>
          </button>
          <button *ngIf="isUserReview(review)" class="btn btn-danger btn-sm" (click)="deleteReview(review._id)">
            <i class="bi bi-trash"></i>
          </button>
        </div>
      </li>
    </ul>
  </div>
  <div *ngIf="reviews && reviews.length == 0" class="mt-4">
    <p>No reviews available.</p>
  </div>
</div>
